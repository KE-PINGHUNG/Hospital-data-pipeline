# ğŸ¥ é†«ç™‚æ›è™Ÿè³‡æ–™åˆ†æç³»çµ±ï¼ˆHospital Data Analytics Pipelineï¼‰

## ğŸ¯ å°ˆæ¡ˆç›®æ¨™
æœ¬å°ˆæ¡ˆæ¨¡æ“¬é†«é™¢è³‡è¨Šç³»çµ±ï¼ˆHISï¼‰çš„è³‡æ–™æ•´åˆèˆ‡åˆ†ææµç¨‹ï¼Œ  
é€é **è³‡æ–™å€‰å„²ï¼ˆDWHï¼‰å»ºç½®ã€ETL è‡ªå‹•åŒ–ã€dbt å»ºæ¨¡ã€Tableau è¦–è¦ºåŒ–**ï¼Œ  
æœ€çµ‚å»ºç«‹ä¸€å€‹å¯å³æ™‚è§€å¯Ÿæ¯æ—¥å°±è¨ºè¶¨å‹¢èˆ‡ç§‘åˆ¥åˆ†ä½ˆçš„æ•¸æ“šå¹³å°ã€‚

---

## ğŸ§© æ¶æ§‹é‚è¼¯ç¸½è¦½

### 1ï¸âƒ£ Data Sourceï¼šHIS ç³»çµ±ï¼ˆMySQLï¼‰
- å»ºç«‹ä¸‰å¼µæ¨¡æ“¬è¡¨ï¼š
  - `patients`ï¼ˆç—…æ‚£åŸºæœ¬è³‡æ–™ï¼‰
  - `appointments`ï¼ˆæ›è™Ÿç´€éŒ„ï¼‰
  - `lab_results`ï¼ˆæª¢é©—çµæœï¼‰
- ä»¥ Faker ç”¢ç”Ÿå‡è³‡æ–™æ¨¡æ“¬çœŸå¯¦å ´æ™¯ï¼Œä¸¦å®šæœŸæ–°å¢æ–°ç´€éŒ„ã€‚

---

### 2ï¸âƒ£ Data Ingestionï¼šè³‡æ–™åŒæ­¥ï¼ˆAirbyteï¼‰
- Airbyte è² è²¬è‡ªå‹•å°‡ **MySQL â†’ PostgreSQL** çš„è³‡æ–™åŒæ­¥ã€‚
- æ”¯æ´ **CDCï¼ˆChange Data Captureï¼‰**ã€‚
- æ¯å€‹ä¾†æºè¡¨æ ¼å°æ‡‰ PostgreSQL çš„ã€Œraw schemaã€ã€‚

> ğŸ’¡ è‹¥åªéœ€åˆ†æéœæ…‹è³‡æ–™ï¼ŒAirbyte å¯æš«æ™‚åœç”¨ã€‚

---

### 3ï¸âƒ£ Data Warehouseï¼šPostgreSQLï¼ˆè³‡æ–™å€‰å„²ï¼‰
è³‡æ–™åˆ†ç‚ºä¸‰å±¤æ¶æ§‹ï¼š

| å±¤ç´š | å‘½åè¦å‰‡ | å…§å®¹èªªæ˜ |
|------|------------|------------|
| **staging å±¤ (stg_)** | `stg_patients`, `stg_appointments`, `stg_lab_results` | æ¸…æ´—èˆ‡æ¨™æº–åŒ–æ¬„ä½ |
| **intermediate å±¤ (int_)** | `int_patient_visits` | æ•´åˆå¤šè¡¨è³‡è¨Š |
| **mart å±¤ (marts_)** | `daily_kpis`, `patients_with_kpis`, `daily_department_kpis` | ç”¢å‡ºåˆ†æç”¨ KPI |

---

### 4ï¸âƒ£ Transformationï¼šdbtï¼ˆè³‡æ–™å»ºæ¨¡ï¼‰
ä½¿ç”¨ dbt ç®¡ç† SQL æ¨¡å‹ç‰ˆæœ¬åŒ–èˆ‡è‡ªå‹•åŸ·è¡Œã€‚

ä¸»è¦æ¨¡å‹ï¼š

| æ¨¡å‹åç¨± | èªªæ˜ |
|-----------|------|
| `stg_patients.sql` | æ¸…æ´—ç—…æ‚£è³‡æ–™ |
| `int_patient_visits.sql` | æ•´åˆæ›è™Ÿèˆ‡æª¢é©—è³‡è¨Š |
| `daily_kpis.sql` | æ¯æ—¥æ•´é«” KPIï¼ˆæ›è™Ÿé‡ã€ç­‰å¾…æ™‚é–“ã€ç•°å¸¸ç‡ï¼‰ |
| `patients_with_kpis.sql` | ç—…æ‚£å±¤ç´š KPI |
| `daily_department_kpis.sql` | æ¯æ—¥ç§‘åˆ¥æ›è™Ÿæ•¸èˆ‡æ¯”ä¾‹åˆ†æ |

åŸ·è¡Œ
dbt run
